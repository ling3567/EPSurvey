<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>奇美醫院E-Portfolio系統使用滿意度調查</title>
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f0f9ff;
            font-size: 16px;
        }
        
        .fade-in { animation: fadeIn 0.5s ease-in-out forwards; }
        .slide-down { animation: slideDown 0.4s ease-out forwards; transform-origin: top; }
        .scale-in { animation: scaleIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideDown { from { opacity: 0; transform: scaleY(0); max-height: 0; } to { opacity: 1; transform: scaleY(1); max-height: 1000px; } }
        @keyframes scaleIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }

        /* 自定義 Radio 樣式 - 選中時邊框變色且背景微亮 */
        .option-label { transition: all 0.2s; }
        .option-input:checked + .option-label {
            border-color: #0ea5e9;
            background-color: #e0f2fe;
            color: #0284c7;
            font-weight: 500;
            box-shadow: 0 0 0 1px #0ea5e9;
        }
        /* 特殊色: 護理題 T6 */
        .option-input-orange:checked + .option-label {
            border-color: #ea580c;
            background-color: #ffedd5;
            color: #c2410c;
            box-shadow: 0 0 0 1px #ea580c;
        }

        .custom-radio:checked + div { border-color: #0ea5e9; background-color: #e0f2fe; color: #0284c7; }
        .custom-radio:checked + div .radio-dot { background-color: #0ea5e9; border-color: #0ea5e9; }
        
        .hidden { display: none; }
        .section-header { border-left: 6px solid #0ea5e9; padding-left: 1rem; }
    </style>
</head>
<body class="text-gray-700 antialiased flex flex-col min-h-screen">

    <header class="bg-gradient-to-r from-sky-600 to-teal-500 text-white shadow-lg relative overflow-hidden flex-shrink-0">
        <div class="absolute top-0 left-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-x-1/2 -translate-y-1/2"></div>
        <div class="absolute bottom-0 right-0 w-48 h-48 bg-white opacity-10 rounded-full translate-x-1/3 translate-y-1/3"></div>
        <div class="container mx-auto px-4 pt-10 pb-16 max-w-4xl text-center relative z-10">
            <h1 class="text-3xl md:text-4xl font-bold mb-2 tracking-wide leading-tight">奇美醫院E-Portfolio系統<br class="md:hidden">使用滿意度調查</h1>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 max-w-4xl -mt-10 relative z-20 flex-grow">
        
        <!-- 成功提交後的感謝頁面 (預設隱藏) -->
        <div id="successMessage" class="hidden bg-white rounded-xl shadow-lg p-8 md:p-12 text-center max-w-2xl mx-auto mt-8">
            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <svg class="w-10 h-10 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">問卷提交成功！</h2>
            <p class="text-lg text-gray-600 mb-8 leading-relaxed">
                感謝您撥冗填寫。<br>您的寶貴意見將是我們持續優化系統的重要動力。
            </p>
            
            <div class="pt-6 border-t border-gray-100">
                <p id="switchRoleText" class="text-base text-gray-600 mb-4">
                    <!-- 這裡的文字會由 JavaScript 動態產生 -->
                </p>
                <button id="switchRoleBtn" class="bg-white border-2 border-sky-500 text-sky-600 hover:bg-sky-50 font-bold py-3 px-8 rounded-full transition shadow-sm flex items-center justify-center mx-auto text-base md:text-lg">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                    <span id="switchRoleBtnText">切換身分並再次填寫</span>
                </button>
            </div>
        </div>

        <!-- 問卷表單區塊 -->
        <div id="surveyContainer">
            <!-- 引言 -->
            <div id="introCard" class="bg-white rounded-xl shadow-md p-6 md:p-8 fade-in border-t-4 border-yellow-400 mb-6">
                <p class="text-lg leading-relaxed text-gray-700">
                    <span class="font-bold text-xl block mb-2 text-gray-800">親愛的同仁/學員 您好：</span>
                    為了提供更優質的數位教學環境，教學部誠摯邀請您填寫此問卷。<br>
                    您的回饋將協助我們持續優化系統功能，並作為未來系統發展規劃的重要依據。
                </p>
            </div>

            <form id="surveyForm" class="space-y-6" onsubmit="submitForm(event)">
                
                <!-- 第一部分 -->
                <section class="bg-white rounded-xl shadow-md p-6 md:p-8 fade-in">
                    <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-6 section-header">第一部分：基本資料與使用習慣</h2>
                    
                    <div class="mb-8">
                        <label class="block text-lg font-medium text-gray-800 mb-4">1. 請問您的職類：<span class="text-red-500">*</span></label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                            <label class="cursor-pointer relative"><input type="radio" name="job_category" value="藥事" class="custom-radio sr-only" required onchange="checkT6Visibility()"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot flex-shrink-0"></span>藥事</div></label>
                            <label class="cursor-pointer relative"><input type="radio" name="job_category" value="醫事放射" class="custom-radio sr-only" onchange="checkT6Visibility()"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot flex-shrink-0"></span>醫事放射</div></label>
                            <label class="cursor-pointer relative"><input type="radio" name="job_category" value="醫事檢驗" class="custom-radio sr-only" onchange="checkT6Visibility()"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot flex-shrink-0"></span>醫事檢驗</div></label>
                            <label class="cursor-pointer relative"><input type="radio" name="job_category" value="護理" class="custom-radio sr-only" onchange="checkT6Visibility()"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot flex-shrink-0"></span>護理</div></label>
                            <label class="cursor-pointer relative"><input type="radio" name="job_category" value="營養" class="custom-radio sr-only" onchange="checkT6Visibility()"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot flex-shrink-0"></span>營養</div></label>
                            <label class="cursor-pointer relative"><input type="radio" name="job_category" value="呼吸治療" class="custom-radio sr-only" onchange="checkT6Visibility()"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot flex-shrink-0"></span>呼吸治療</div></label>
                            <label class="cursor-pointer relative"><input type="radio" name="job_category" value="聽力" class="custom-radio sr-only" onchange="checkT6Visibility()"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot flex-shrink-0"></span>聽力</div></label>
                            <label class="cursor-pointer relative"><input type="radio" name="job_category" value="物理治療" class="custom-radio sr-only" onchange="checkT6Visibility()"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot flex-shrink-0"></span>物理治療</div></label>
                            <label class="cursor-pointer relative"><input type="radio" name="job_category" value="職能治療" class="custom-radio sr-only" onchange="checkT6Visibility()"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot flex-shrink-0"></span>職能治療</div></label>
                            <label class="cursor-pointer relative"><input type="radio" name="job_category" value="臨床心理" class="custom-radio sr-only" onchange="checkT6Visibility()"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot flex-shrink-0"></span>臨床心理</div></label>
                            <label class="cursor-pointer relative"><input type="radio" name="job_category" value="語言治療" class="custom-radio sr-only" onchange="checkT6Visibility()"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot flex-shrink-0"></span>語言治療</div></label>
                        </div>
                    </div>

                    <div class="mb-8">
                        <label class="block text-lg font-medium text-gray-800 mb-4">2. 平均每週使用 E-Portfolio系統的頻率？<span class="text-red-500">*</span></label>
                        <div class="space-y-3">
                            <label class="cursor-pointer relative block"><input type="radio" name="frequency" value="極少使用" class="custom-radio sr-only" required><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot"></span>極少使用 (每週小於 1 次)</div></label>
                            <label class="cursor-pointer relative block"><input type="radio" name="frequency" value="偶爾使用" class="custom-radio sr-only"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot"></span>偶爾使用 (每週 1-3 次)</div></label>
                            <label class="cursor-pointer relative block"><input type="radio" name="frequency" value="經常使用" class="custom-radio sr-only"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot"></span>經常使用 (每週 4-5 次)</div></label>
                            <label class="cursor-pointer relative block"><input type="radio" name="frequency" value="重度使用" class="custom-radio sr-only"><div class="p-4 border rounded-lg hover:bg-gray-50 transition flex items-center text-base"><span class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 radio-dot"></span>重度使用 (每週 6 次以上)</div></label>
                        </div>
                    </div>

                    <div class="mb-2" id="q3-section">
                        <label class="block text-lg font-medium text-gray-800 mb-4 text-sky-800 bg-sky-100 p-4 rounded-lg border-l-4 border-sky-600">
                            3. 請問您最常使用的系統權限？ <span class="text-red-600 font-bold">*</span>
                            <span class="text-base font-normal block mt-2 text-gray-700">此題為必答，將決定第三部分的題目內容。</span>
                        </label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <label class="cursor-pointer relative">
                                <input type="radio" name="role" value="臨床教師" class="custom-radio sr-only" required onchange="togglePart3()">
                                <div class="p-6 border-2 rounded-xl hover:bg-gray-50 transition flex items-center justify-center text-center h-full group hover:border-sky-300">
                                    <div><div class="font-bold text-xl mb-1 group-hover:text-sky-700">臨床教師</div></div>
                                </div>
                            </label>
                            <label class="cursor-pointer relative">
                                <input type="radio" name="role" value="學員" class="custom-radio sr-only" onchange="togglePart3()">
                                <div class="p-6 border-2 rounded-xl hover:bg-gray-50 transition flex items-center justify-center text-center h-full group hover:border-sky-300">
                                    <div><div class="font-bold text-xl mb-1 group-hover:text-sky-700">學員</div></div>
                                </div>
                            </label>
                        </div>
                    </div>
                </section>

                <!-- 第二部分：卡片式版面 -->
                <section class="bg-white rounded-xl shadow-md p-6 md:p-8 fade-in" style="animation-delay: 0.1s;">
                    <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-6 section-header">第二部分：E-Portfolio系統功能與資訊品質</h2>
                    
                    <!-- 共用選項模板 -->
                    <template id="options-template">
                        <div class="grid grid-cols-1 gap-2 mt-3">
                            <label class="cursor-pointer">
                                <input type="radio" name="" value="5" class="option-input sr-only" required>
                                <div class="option-label p-3 border rounded-lg text-center hover:bg-gray-50">非常同意</div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="" value="4" class="option-input sr-only">
                                <div class="option-label p-3 border rounded-lg text-center hover:bg-gray-50">同意</div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="" value="3" class="option-input sr-only">
                                <div class="option-label p-3 border rounded-lg text-center hover:bg-gray-50">普通</div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="" value="2" class="option-input sr-only">
                                <div class="option-label p-3 border rounded-lg text-center hover:bg-gray-50">不同意</div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="" value="1" class="option-input sr-only">
                                <div class="option-label p-3 border rounded-lg text-center hover:bg-gray-50">非常不同意</div>
                            </label>
                        </div>
                    </template>

                    <!-- Q1 -->
                    <div class="mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                        <p class="font-medium text-lg text-gray-800">Q1. 本系統的操作介面簡單清楚，容易上手。<span class="text-red-500">*</span></p>
                        <!-- 選項直接展開 -->
                        <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                            <label class="cursor-pointer"><input type="radio" name="q1" value="5" class="option-input sr-only" required><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q1" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q1" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q1" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q1" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                        </div>
                    </div>

                    <!-- Q2 -->
                    <div class="mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                        <p class="font-medium text-lg text-gray-800">Q2. 系統運作穩定，很少出現錯誤訊息或當機。<span class="text-red-500">*</span></p>
                        <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                            <label class="cursor-pointer"><input type="radio" name="q2" value="5" class="option-input sr-only" required><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q2" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q2" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q2" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q2" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                        </div>
                    </div>

                    <!-- Q3 -->
                    <div class="mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                        <p class="font-medium text-lg text-gray-800">Q3. 系統方便查詢及閱讀課程內容資訊。<span class="text-red-500">*</span></p>
                        <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                            <label class="cursor-pointer"><input type="radio" name="q3" value="5" class="option-input sr-only" required><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q3" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q3" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q3" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q3" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                        </div>
                    </div>

                    <!-- Q4 -->
                    <div class="mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                        <p class="font-medium text-lg text-gray-800">Q4. 系統能讓我清楚掌握目前的學習/教學進度。<span class="text-red-500">*</span></p>
                        <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                            <label class="cursor-pointer"><input type="radio" name="q4" value="5" class="option-input sr-only" required><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q4" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q4" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q4" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q4" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                        </div>
                    </div>

                    <!-- Q5 -->
                    <div class="mb-0 p-4 bg-gray-50 rounded-xl border border-gray-100">
                        <p class="font-medium text-lg text-gray-800">Q5. 整體而言，我對E-Portfolio系統的功能感到滿意。<span class="text-red-500">*</span></p>
                        <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                            <label class="cursor-pointer"><input type="radio" name="q5" value="5" class="option-input sr-only" required><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q5" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q5" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q5" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                            <label class="cursor-pointer"><input type="radio" name="q5" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                        </div>
                    </div>
                </section>

                <!-- 第三部分 -->
                <section id="part3-container" class="bg-white rounded-xl shadow-md p-6 md:p-8 fade-in">
                    <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-6 section-header">第三部分：E-Portfolio系統成效評估</h2>
                    
                    <div id="part3-placeholder" class="bg-amber-50 border-l-4 border-amber-400 p-6 text-amber-900 flex items-start">
                        <svg class="w-8 h-8 mr-4 flex-shrink-0 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <div>
                            <p class="font-bold text-lg">⚠️ 本區題目尚未顯示</p>
                            <p class="text-base mt-2">請先返回 <a href="#q3-section" class="underline font-bold text-amber-700 hover:text-amber-500">第一部分第 3 題</a> 選擇您的身分（臨床教師或學員），系統將自動顯示對應的評估題目。</p>
                        </div>
                    </div>

                    <!-- 臨床教師題目區 -->
                    <div id="section-teacher" class="hidden">
                        <div class="mb-6 bg-teal-50 text-teal-800 px-4 py-2 rounded-lg text-base font-bold inline-block border border-teal-200">【臨床教師填答區】</div>
                        
                        <!-- T1 -->
                        <div class="question-block mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                            <p class="font-medium text-lg text-gray-800"><span class="q-label">T1.</span> 我清楚知道如何在系統中進行學員評核與回饋。<span class="text-red-500">*</span></p>
                            <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                                <label class="cursor-pointer"><input type="radio" name="t1" value="5" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t1" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t1" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t1" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t1" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                            </div>
                        </div>

                        <!-- T2 -->
                        <div class="question-block mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                            <p class="font-medium text-lg text-gray-800"><span class="q-label">T2.</span> 在進行評核時，我能順暢地完成評分與送出，不需頻繁尋求協助。<span class="text-red-500">*</span></p>
                            <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                                <label class="cursor-pointer"><input type="radio" name="t2" value="5" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t2" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t2" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t2" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t2" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                            </div>
                        </div>

                        <!-- T3 -->
                        <div class="question-block mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                            <p class="font-medium text-lg text-gray-800"><span class="q-label">T3.</span> 使用本系統能有效節省我的工作時間（如：教學、管理或評核）。<span class="text-red-500">*</span></p>
                            <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                                <label class="cursor-pointer"><input type="radio" name="t3" value="5" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t3" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t3" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t3" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t3" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                            </div>
                        </div>

                        <!-- T4 -->
                        <div class="question-block mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                            <p class="font-medium text-lg text-gray-800"><span class="q-label">T4.</span> 系統完整保存了我的教學與評核紀錄，方便日後查閱。<span class="text-red-500">*</span></p>
                            <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                                <label class="cursor-pointer"><input type="radio" name="t4" value="5" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t4" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t4" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t4" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t4" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                            </div>
                        </div>

                        <!-- T5 -->
                        <div class="question-block mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                            <p class="font-medium text-lg text-gray-800"><span class="q-label">T5.</span> 我指導的學生熟悉E-Portfolio系統的操作。<span class="text-red-500">*</span></p>
                            <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                                <label class="cursor-pointer"><input type="radio" name="t5" value="5" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t5" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t5" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t5" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t5" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                            </div>
                        </div>

                        <!-- T6 (護理專屬) -->
                        <div id="card-t6" class="question-block mb-8 p-4 bg-orange-50 rounded-xl border border-orange-200 hidden">
                            <p class="font-medium text-lg text-orange-900"><span class="q-label">T6.</span> 對於系統中的「臨床教師定期評量」查詢功能，比傳統方式（紙本）更節省我的工作時間。(護理師專屬)<span class="text-red-500">*</span></p>
                            <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                                <label class="cursor-pointer"><input type="radio" name="t6" value="5" class="option-input-orange sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-orange-100">非常同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t6" value="4" class="option-input-orange sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-orange-100">同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t6" value="3" class="option-input-orange sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-orange-100">普通</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t6" value="2" class="option-input-orange sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-orange-100">不同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t6" value="1" class="option-input-orange sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-orange-100">非常不同意</div></label>
                            </div>
                        </div>

                        <!-- T7 -->
                        <div class="question-block mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                            <p class="font-medium text-lg text-gray-800"><span class="q-label">T7.</span> 當我在使用E-Portfolio系統遇到問題時，能獲得有效的協助。<span class="text-red-500">*</span></p>
                            <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                                <label class="cursor-pointer"><input type="radio" name="t7" value="5" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t7" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t7" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t7" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="t7" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                            </div>
                        </div>
                    </div>

                    <!-- 學員題目區 -->
                    <div id="section-student" class="hidden">
                        <div class="mb-6 bg-sky-50 text-sky-800 px-4 py-2 rounded-lg text-base font-bold inline-block border border-sky-200">【學員填答區】</div>
                        
                        <!-- S1 -->
                        <div class="mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                            <p class="font-medium text-lg text-gray-800">S1. 透過系統，我能順利查閱老師的評核結果與具體回饋。<span class="text-red-500">*</span></p>
                            <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                                <label class="cursor-pointer"><input type="radio" name="s1" value="5" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s1" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s1" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s1" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s1" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                            </div>
                        </div>

                        <!-- S2 -->
                        <div class="mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                            <p class="font-medium text-lg text-gray-800">S2. 系統完整保存了我的學習歷程與評核紀錄，方便我隨時回顧與檢視學習成果。<span class="text-red-500">*</span></p>
                            <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                                <label class="cursor-pointer"><input type="radio" name="s2" value="5" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s2" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s2" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s2" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s2" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                            </div>
                        </div>

                        <!-- S3 -->
                        <div class="mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                            <p class="font-medium text-lg text-gray-800">S3. 透過系統，我能清楚掌握目前的完訓進度與待辦項目。<span class="text-red-500">*</span></p>
                            <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                                <label class="cursor-pointer"><input type="radio" name="s3" value="5" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s3" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s3" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s3" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s3" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                            </div>
                        </div>

                        <!-- S4 -->
                        <div class="mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                            <p class="font-medium text-lg text-gray-800">S4. 我的授課老師熟悉E-Portfolio系統的操作。<span class="text-red-500">*</span></p>
                            <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                                <label class="cursor-pointer"><input type="radio" name="s4" value="5" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s4" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s4" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s4" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s4" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                            </div>
                        </div>

                        <!-- S5 -->
                        <div class="mb-8 p-4 bg-gray-50 rounded-xl border border-gray-100">
                            <p class="font-medium text-lg text-gray-800">S5. 當我在使用E-Portfolio系統遇到問題時，能獲得有效的協助。<span class="text-red-500">*</span></p>
                            <div class="grid grid-cols-1 sm:grid-cols-5 gap-2 mt-3">
                                <label class="cursor-pointer"><input type="radio" name="s5" value="5" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s5" value="4" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s5" value="3" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">普通</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s5" value="2" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">不同意</div></label>
                                <label class="cursor-pointer"><input type="radio" name="s5" value="1" class="option-input sr-only"><div class="option-label p-3 border bg-white rounded-lg text-center hover:bg-gray-50">非常不同意</div></label>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 第四部分 -->
                <section class="bg-white rounded-xl shadow-md p-6 md:p-8 fade-in" style="animation-delay: 0.2s;">
                    <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-6 section-header">第四部分：開放式回饋</h2>
                    <div class="mb-6">
                        <label class="block text-gray-800 font-medium mb-3 leading-relaxed text-base">
                            1. 為了提供更順暢的使用體驗，若未來針對系統核心流程（如：開課設定、評核作業、資料上傳、進度查詢）進行調整，您認為目前最需要改善的「瓶頸」或「不便之處」為何？
                        </label>
                        <textarea name="feedback_bottleneck" rows="4" class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-300 focus:border-sky-500 outline-none transition text-base" placeholder="您的建議將作為系統長期發展規劃的重要參考..."></textarea>
                    </div>
                    <div>
                        <label class="block text-gray-800 font-medium mb-3 text-base">2. 其他建議事項：</label>
                        <textarea name="feedback_other" rows="3" class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-300 focus:border-sky-500 outline-none transition text-base" placeholder="任何想法都歡迎告訴我們..."></textarea>
                    </div>
                </section>

                <!-- 送出 -->
                <div class="text-center pt-4 pb-8">
                    <button type="submit" id="submitBtn" class="bg-gradient-to-r from-sky-600 to-teal-500 hover:from-sky-700 hover:to-teal-600 text-white font-bold py-4 px-12 rounded-full shadow-lg transform transition hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed text-lg">
                        提交問卷
                    </button>
                </div>
            </form>
        </div>
    </main>

    <footer class="bg-slate-800 text-slate-300 py-6 mt-8 flex-shrink-0">
        <div class="container mx-auto px-4 text-center">
            <p class="text-sm md:text-base font-medium">&copy; 2025 Chi Mei Medical Center. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // 設定 Apps Script URL
        const scriptURL = 'https://script.google.com/macros/s/AKfycbxdRm9EWUy1BlpX_5c2zqtDNg9pGGpjZkEept_fX3W2HijvjJ3WHWe7uxqyeZxLmBIW5w/exec'; 

        function togglePart3() {
            const role = document.querySelector('input[name="role"]:checked')?.value;
            const teacherSection = document.getElementById('section-teacher');
            const studentSection = document.getElementById('section-student');
            const placeholder = document.getElementById('part3-placeholder');
            
            teacherSection.classList.add('hidden');
            studentSection.classList.add('hidden');
            placeholder.classList.add('hidden');
            setRequired(teacherSection, false);
            setRequired(studentSection, false);

            if (role === '臨床教師') {
                teacherSection.classList.remove('hidden');
                setRequired(teacherSection, true, ['t6']);
                checkT6Visibility();
            } else if (role === '學員') {
                studentSection.classList.remove('hidden');
                setRequired(studentSection, true);
            } else {
                placeholder.classList.remove('hidden');
            }
        }

        function checkT6Visibility() {
            const job = document.querySelector('input[name="job_category"]:checked')?.value;
            const role = document.querySelector('input[name="role"]:checked')?.value;
            const t6Card = document.getElementById('card-t6'); // Changed from row-t6 to card-t6
            const t6Inputs = t6Card.querySelectorAll('input[type="radio"]');

            if (role === '臨床教師' && job === '護理') {
                t6Card.classList.remove('hidden');
                t6Card.classList.add('slide-down'); 
                t6Inputs.forEach(input => input.required = true);
            } else {
                t6Card.classList.add('hidden');
                t6Card.classList.remove('slide-down');
                t6Inputs.forEach(input => {
                    input.required = false;
                    input.checked = false;
                });
            }
            
            updateTeacherQuestionNumbers();
        }

        function updateTeacherQuestionNumbers() {
            // Updated selector for new card structure
            const visibleLabels = document.querySelectorAll('#section-teacher .question-block:not(.hidden) .q-label');
            visibleLabels.forEach((label, index) => {
                label.textContent = `T${index + 1}.`;
            });
        }

        function setRequired(section, isRequired, excludeNames = []) {
            const radios = section.querySelectorAll('input[type="radio"]');
            radios.forEach(radio => {
                if (!excludeNames.includes(radio.name)) {
                    radio.required = isRequired;
                }
            });
            if (!isRequired) {
                radios.forEach(radio => radio.checked = false);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const roleSelected = document.querySelector('input[name="role"]:checked');
            if (roleSelected) togglePart3();
            else document.getElementById('part3-placeholder').classList.remove('hidden');
        });

        function submitForm(e) {
            e.preventDefault();
            
            const btn = document.getElementById('submitBtn');
            const originalText = btn.innerText;
            const role = document.querySelector('input[name="role"]:checked');
            
            if (!role) {
                alert('請先於第一部分完成身分選擇，以填寫第三部分題目。');
                document.getElementById('q3-section').scrollIntoView({ behavior: 'smooth', block: 'center' });
                return;
            }

            btn.disabled = true;
            btn.innerText = '資料傳送中...';

            const form = document.getElementById('surveyForm');
            const formData = new FormData(form);
            
            const currentRole = formData.get('role');

            fetch(scriptURL, { method: 'POST', body: formData })
                .then(response => {
                    document.getElementById('surveyContainer').classList.add('hidden');
                    
                    const switchText = document.getElementById('switchRoleText');
                    const switchBtnText = document.getElementById('switchRoleBtnText');
                    const switchBtn = document.getElementById('switchRoleBtn');
                    
                    if (currentRole === '臨床教師') {
                        switchText.innerHTML = '若您同時具備 <span class="font-bold text-sky-600">學員</span> 身分，歡迎切換身分再次填寫。';
                        switchBtnText.innerText = '以學員身分再次填寫';
                        switchBtn.onclick = function() { resetForNewRole('學員'); };
                    } else {
                        switchText.innerHTML = '若您同時具備 <span class="font-bold text-sky-600">臨床教師</span> 身分，歡迎切換身分再次填寫。';
                        switchBtnText.innerText = '以臨床教師身分再次填寫';
                        switchBtn.onclick = function() { resetForNewRole('臨床教師'); };
                    }

                    const successMessage = document.getElementById('successMessage');
                    successMessage.classList.remove('hidden');
                    successMessage.classList.add('scale-in');

                    window.scrollTo({ top: 0, behavior: 'smooth' });

                    btn.disabled = false;
                    btn.innerText = originalText;
                })
                .catch(error => {
                    console.error('Error!', error.message);
                    alert('發生錯誤，請檢查網路連線或稍後再試。');
                    btn.disabled = false;
                    btn.innerText = originalText;
                });
        }

        function resetForNewRole(targetRole) {
            document.getElementById('successMessage').classList.add('hidden');
            document.getElementById('successMessage').classList.remove('scale-in');
            document.getElementById('surveyContainer').classList.remove('hidden');

            const roleRadios = document.querySelectorAll('input[name="role"]');
            roleRadios.forEach(radio => radio.checked = false);

            const inputsToClear = document.querySelectorAll(
                'input[name^="q"], input[name^="t"], input[name^="s"], textarea'
            );
            inputsToClear.forEach(input => {
                if(input.type === 'radio' || input.type === 'checkbox') {
                    input.checked = false;
                } else {
                    input.value = '';
                }
            });

            if (targetRole) {
                const targetRadio = document.querySelector(`input[name="role"][value="${targetRole}"]`);
                if (targetRadio) {
                    targetRadio.checked = true;
                    togglePart3(); 
                }
            } else {
                togglePart3();
            }

            const q3Section = document.getElementById('q3-section');
            q3Section.scrollIntoView({ behavior: 'smooth', block: 'center' });
            q3Section.classList.add('bg-yellow-50');
            setTimeout(() => {
                q3Section.classList.remove('bg-yellow-50');
            }, 1000);
        }
    </script>
</body>
</html>
